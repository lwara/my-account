<div class="card">
  <div class="card-body">
    <h4 class="card-title">Fitting Progress</h4>
    {% if fittings %}
      {% for f in fittings %}
        <div class="mb-4">
          <h5>{{ f.kind|capitalize }} â€” {{ f.scheduled_at }}</h5>
          <p>Status: <strong>{{ f.status }}</strong></p>
          <div class="progress" style="height: 1.25rem;">
            {% set stages = ['Fitting Request Submitted','Fitting being Prepped','Fitting Scheduled','Fitting Canceled','Fitting Completed'] %}
            {% set idx = stages.index(f.status) if f.status in stages else 0 %}
            <div class="progress-bar" role="progressbar" style="width: {{ ((idx+1)/stages|length) * 100 }}%" aria-valuenow="{{ idx+1 }}" aria-valuemin="0" aria-valuemax="{{ stages|length }}"></div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No fittings yet. Schedule one from the sidebar.</p>
    {% endif %}
  </div>
</div>
